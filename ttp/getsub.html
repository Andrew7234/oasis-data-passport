<!doctype html>
<meta charset="utf-8">
<body>
<p><input type="button" value="Log in" id="login" disabled></p>
<script src="https://cdn.jsdelivr.net/gh/IdentityModel/oidc-client-js@1.10.1/dist/oidc-client.js"></script>
<script src="consts.js"></script>
<script>
Oidc.Log.logger = console;
Oidc.Log.level = Oidc.Log.DEBUG;
const userManager = new Oidc.UserManager(BUILTIN_OIDC_CONFIG);

(async () => {
    try {
        const user = await userManager.getUser();
        parent.postMessage({
            type: 'oasis-data-passport-sub',
            sub: user?.profile?.sub,
        }, '*');
    } catch (e) {
        console.error(e);
    }
})();
</script>
</body>
